<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Settings | Smile Logistics</title>
     <!-- jQuery -->

     <include src="./partials/mainhead.html"> </include>
     <script src="./assets/js/main.js"></script>
  </head>
  <body
    x-data="{ page: 'settings', 'loaded': true, 'darkMode': false, 'stickyMenu': false, 'sidebarToggle': false, 'scrollTop': false }"
    x-init="
         darkMode = JSON.parse(localStorage.getItem('darkMode'));
         $watch('darkMode', value => localStorage.setItem('darkMode', JSON.stringify(value)))"
    :class="{'dark bg-gray-900': darkMode === true}"
  >
    <!-- ===== Preloader Start ===== -->
    <include src="./partials/preloader.html"></include>
    <!-- ===== Preloader End ===== -->

    <!-- ===== Page Wrapper Start ===== -->
    <div class="flex h-screen overflow-hidden">
      <!-- ===== Sidebar Start ===== -->
      <include src="./partials/sidebar.html"></include>
      <!-- ===== Sidebar End ===== -->

      <!-- ===== Content Area Start ===== -->
      <div
        class="relative flex flex-1 flex-col overflow-y-auto overflow-x-hidden"
      >
        <!-- Small Device Overlay Start -->
        <include src="./partials/overlay.html" />
        <!-- Small Device Overlay End -->

        <!-- ===== Header Start ===== -->
        <include src="./partials/header.html" />
        <!-- ===== Header End ===== -->

        <!-- ===== Main Content Start ===== -->
      
        <main x-data="settings()">
          <div x-show="isLoading" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
            <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
          </div>
          <div class="mx-auto max-w-screen-2xl p-4 md:p-6">
            <!-- Breadcrumb Start -->
            <div x-data="{ pageName: `Settings`}">
              <include src="./partials/breadcrumb.html" />
            </div>
            <!-- Breadcrumb End -->

            <div class="rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]" x-data="{ userRole: 'Loading...', user_type: null }"
            x-init="
                document.addEventListener('userRoleLoaded', () => {
                    userRole = window.userRole;
                    console.log('Updated userRole:', userRole);
                });
            ">
            <!-- Superadmin settings begins -->
             <template x-if="userRole === 'superadministrator' ">
                <div x-data="{ activeTab: 'general' }" class="w-full mx-auto bg-white p-6 shadow-lg rounded-md dark:bg-white/[0.03]">
                    <!-- Tabs -->
                    <div class="text-sm font-medium text-center text-gray-500 border-b border-gray-200">
                        <ul class="flex flex-wrap -mb-px">
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'general'"
                                    :class="activeTab === 'general' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300" id="profile-tab">General Setiings</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'payment'"
                                    :class="activeTab === 'payment' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 text-gray-300 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Payment Gateway Setup</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'sms'"
                                    :class="activeTab === 'sms' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">SMS Settings</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'security'"
                                    :class="activeTab === 'security' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Security</a>
                            </li>
                        </ul>
                    </div>
            
                    <!-- Tab Content -->
                    <div class="mt-4">
                        <!-- General Settings Form -->
                        <div x-show="activeTab === 'general'">
                            <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">General Settings</h2>
                            <form id="generalForm" @submit.prevent="submitForm('general')" x-ref="generalForm" enctype="multipart/form-data">
                              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Name:</label>
                                  <input type="text" :value="user.name" name="name" 
                                         class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" 
                                         placeholder="Enter Name" readonly>
                                </div>
                                  <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Email:</label>
                                      <input type="email" x-model="user.email" name="email" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                  </div>
                                  
                                  <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Phone:</label>
                                    <input type="text" x-model="formData.phone" name="phone" class="numberOnly w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="Enter Phone number">
                                </div>
                              </div>

                              <!-- <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Address:</label>
                                    <input type="text" x-model="formData.address" name="address" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="No 123, Street">
                                </div>
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Parcel Prefix:</label>
                                    <input type="text" x-model="formData.parcel_prefix" name="parcel_prefix" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SML">
                                </div>
                                
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Invoice Prefix:</label>
                                  <input type="text" x-model="formData.invoice_prefix" name="invoice_prefix" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SMLINV">
                              </div>
                            </div> -->
                            <style>
                            .chosen-container-single .chosen-single {
                                height: 40px !important;
                                background: none !important;
                                border: none !important;
                                vertical-align: middle !important;
                              }
                            </style>


                            
                            <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                              <span x-show="!isLoading">Save Changes</span>
                              <span x-show="isLoading" class="flex items-center justify-center">
                                <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                Saving...
                              </span>
                            </button>
                            </form>
                        </div>
            
                       <!-- Payment Gateway Form -->
                        <div x-show="activeTab === 'payment'">
                          <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Payment Gateway Setup</h2>
                          <form  @submit.prevent="submitForm('payment')" x-ref="paymentForm">
                              <!-- Paystack Settings -->
                              <div>
                                  <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Paystack Settings</h6>
                                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                          <input type="text" x-model="formData.paystack_publicKey" name="paystack_publicKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                          <input type="text" x-model="formData.paystack_secretKey" name="paystack_secretKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                      </div>
                                  </div> <!-- ✅ Correctly closed grid div -->
                              </div>

                              <!-- Flutterwave Settings -->
                              <div>
                                  <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Flutterwave Settings</h6>
                                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                          <input type="text" x-model="formData.FLW_pubKey" name="FLW_pubKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                          <input type="text" x-model="formData.FLW_secKey" name="FLW_secKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                      </div>
                                  </div>
                              </div>

                               <!-- Razor Settings -->
                              <div>
                                <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">RazorPay Settings</h6>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                        <input type="text" x-model="formData.Razor_pubKey" name="Razor_pubKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                        <input type="text" x-model="formData.Razor_secKey" name="Razor_secKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                    </div>
                                  </div>
                              </div>
                               <!-- Stripe Settings -->
                               <div>
                                <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Stripe Settings</h6>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                        <input type="text" x-model="formData.stripe_pubKey" name="stripe_pubKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                        <input type="text" x-model="formData.stripe_secKey" name="stripe_secKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                    </div>
                                  </div>
                                </div>
                              <!-- <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button> -->
                              <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                                <span x-show="!isLoading">Save Changes</span>
                                <span x-show="isLoading" class="flex items-center justify-center">
                                  <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                  </svg>
                                  Saving...
                                </span>
                              </button>
                          </form>
                        </div>

            
                        <!-- Mail Settings Form -->
                        <div x-show="activeTab === 'sms'">
                            <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Mail Settings</h2>
                            <form @submit.prevent="submitForm('sms')" x-ref="smsForm">
                              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Driver:</label>
                                    <input type="text" x-model="formData.mail_driver" name="mail_driver" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="smtp">
                                </div>
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Host:</label>
                                    <input type="text" x-model="formData.mail_host" name="mail_host" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="smtp.mailtrap.io">
                                </div>
                                
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Port:</label>
                                  <input type="text" x-model="formData.mail_port" name="mail_port" class="numberOnly w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="465">
                              </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Encryption:</label>
                                  <input type="text" x-model="formData.mail_encryption" name="mail_encryption" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SSL TLS">
                              </div>
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Username:</label>
                                  <input type="text" x-model="formData.mail_username" name="mail_username" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="example@mail.com">
                              </div>
                              
                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Password:</label>
                                <input type="password" x-model="formData.mail_password" name="mail_password" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                              </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail From:</label>
                                  <input type="text" x-model="formData.mail_from" name="mail_from" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="example.com">
                              </div>
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Fron Name:</label>
                                  <input type="text" x-model="formData.mail_from_name" name="mail_from_name" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SMILE LOGISTICS">
                              </div>
                              
                            </div>
                              <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button>
                            </form>
                        </div>
            
                        <!-- Contacts Form -->
                        <div x-show="activeTab === 'security'">
                            <h2 class="text-lg font-semibold mb-3">Security Settings</h2>
                            <form id="securityForm" @submit.prevent="submitForm('security')" x-ref="securityForm">
                              <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
                                <input type="hidden" name="enable_email_otp" :value="formData.enable_email_otp">
                                <input type="hidden" name="enable_2fa" :value="formData.enable_2fa">
                                  <!-- <div>
                                      <label class="inline-flex items-center mb-5 cursor-pointer">
                                          <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Enable Email OTP</span>
                                          <input type="checkbox" 
                                                 x-model="formData.enable_email_otp" 
                                                 name="enable_email_otp" 
                                                 @change="formData.enable_email_otp = $event.target.checked ? 1 : 0"
                                                 :checked="formData.enable_email_otp == 1"
                                                 class="sr-only peer">
                                          <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-4 after:h-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                      </label>
                                  </div> -->
                                   <div>
                                      <label class="inline-flex items-center mb-5 cursor-pointer">
                                          <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Enable Email OTP</span>
                                          <input type="checkbox" 
                                                 x-model="formData.enable_email_otp" 
                                                 name="enable_email_otp" 
                                                 @change="formData.enable_email_otp = $event.target.checked ? 1 : 0"
                                                 :checked="formData.enable_email_otp == 1"
                                                 class="sr-only peer">
                                          <div class="relative w-11 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-4 after:h-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                      </label>
                                  </div>
                                  <div>
                                      <label class="inline-flex items-center mb-5 cursor-pointer">
                                          <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Enable 2FA</span>
                                          <input type="checkbox" 
                                                 x-model="formData.enable_2fa" 
                                                 name="enable_2fa" 
                                                 @change="formData.enable_2fa = $event.target.checked ? 1 : 0"
                                                 :checked="formData.enable_2fa == 1"
                                                 class="sr-only peer">
                                          <div class="relative w-11 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-4 after:h-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                      </label>
                                  </div>
                              </div>
                              <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button>
                          </form>
                        </div>
                    </div>
                </div>
              </template>
              <!-- Super Admin settings end -->

              
              <!-- branch settings Starts -->
              <template x-if="userRole === 'businessadministrator' ">
                <div x-data="{ activeTab: 'general' }" class="w-full mx-auto bg-white p-6 shadow-lg rounded-md dark:bg-white/[0.03]">
                    <!-- Tabs -->
                    <div class="text-sm font-medium text-center text-gray-500 border-b border-gray-200">
                        <ul class="flex flex-wrap -mb-px">
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'general'"
                                    :class="activeTab === 'general' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300" id="profile-tab">General Setiings</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'account'"
                                    :class="activeTab === 'account' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 text-gray-300 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Payment Account Setup</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'payment'"
                                    :class="activeTab === 'payment' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 text-gray-300 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Payment Gateway Setup</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'sms'"
                                    :class="activeTab === 'sms' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">SMS Settings</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'security'"
                                    :class="activeTab === 'security' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Security</a>
                            </li>
                            
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'offices'"
                                    :class="activeTab === 'offices' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Offices</a>
                            </li>
                        </ul>
                    </div>
            
                    <!-- Tab Content -->
                    <div class="mt-4">
                        <!-- General Settings Form -->
                        <div x-show="activeTab === 'general'">
                            <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">General Settings</h2>
                            <form id="generalForm" @submit.prevent="submitForm('general')" x-ref="generalForm" enctype="multipart/form-data">
                              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Name:</label>
                                  <input type="text" :value="user.name" name="name" 
                                         class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" 
                                         placeholder="Enter Name" readonly>
                                </div>
                                  <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Email:</label>
                                      <input type="email" x-model="user.email" name="email" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                  </div>
                                  
                                  <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Phone:</label>
                                    <input type="text" x-model="formData.phone" name="phone" class="numberOnly w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="Enter Phone number">
                                </div>
                              </div>

                              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Address:</label>
                                    <input type="text" x-model="formData.address" name="address" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="No 123, Street">
                                </div>
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Parcel Prefix:</label>
                                    <input type="text" x-model="formData.parcel_prefix" name="parcel_prefix" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SML">
                                </div>
                                
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Invoice Prefix:</label>
                                  <input type="text" x-model="formData.invoice_prefix" name="invoice_prefix" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SMLINV">
                              </div>
                            </div>
                            <style>
                            .chosen-container-single .chosen-single {
                                height: 40px !important;
                                background: none !important;
                                border: none !important;
                                vertical-align: middle !important;
                              }
                            </style>

                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                              <div id="chosen-select">
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Currency:</label>
                                <select x-model="formData.currency" name="currency" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 chosen-select">
                                  <option value="" selected disabled>Select a currency</option>
                                  <option value="AED">AED - United Arab Emirates Dirham</option>
                                  <option value="AFN">AFN - Afghan Afghani</option>
                                  <option value="ALL">ALL - Albanian Lek</option>
                                  <option value="AMD">AMD - Armenian Dram</option>
                                  <option value="ANG">ANG - Netherlands Antillean Guilder</option>
                                  <option value="AOA">AOA - Angolan Kwanza</option>
                                  <option value="ARS">ARS - Argentine Peso</option>
                                  <option value="AUD">AUD - Australian Dollar</option>
                                  <option value="AWG">AWG - Aruban Florin</option>
                                  <option value="AZN">AZN - Azerbaijani Manat</option>
                                  <option value="BAM">BAM - Bosnia-Herzegovina Convertible Mark</option>
                                  <option value="BBD">BBD - Barbadian Dollar</option>
                                  <option value="BDT">BDT - Bangladeshi Taka</option>
                                  <option value="BGN">BGN - Bulgarian Lev</option>
                                  <option value="BHD">BHD - Bahraini Dinar</option>
                                  <option value="BIF">BIF - Burundian Franc</option>
                                  <option value="BMD">BMD - Bermudan Dollar</option>
                                  <option value="BND">BND - Brunei Dollar</option>
                                  <option value="BOB">BOB - Bolivian Boliviano</option>
                                  <option value="BRL">BRL - Brazilian Real</option>
                                  <option value="BSD">BSD - Bahamian Dollar</option>
                                  <option value="BTN">BTN - Bhutanese Ngultrum</option>
                                  <option value="BWP">BWP - Botswanan Pula</option>
                                  <option value="BYN">BYN - Belarusian Ruble</option>
                                  <option value="BZD">BZD - Belize Dollar</option>
                                  <option value="CAD">CAD - Canadian Dollar</option>
                                  <option value="CDF">CDF - Congolese Franc</option>
                                  <option value="CHF">CHF - Swiss Franc</option>
                                  <option value="CLP">CLP - Chilean Peso</option>
                                  <option value="CNY">CNY - Chinese Yuan</option>
                                  <option value="COP">COP - Colombian Peso</option>
                                  <option value="CRC">CRC - Costa Rican Colón</option>
                                  <option value="CUP">CUP - Cuban Peso</option>
                                  <option value="CVE">CVE - Cape Verdean Escudo</option>
                                  <option value="CZK">CZK - Czech Republic Koruna</option>
                                  <option value="DJF">DJF - Djiboutian Franc</option>
                                  <option value="DKK">DKK - Danish Krone</option>
                                  <option value="DOP">DOP - Dominican Peso</option>
                                  <option value="DZD">DZD - Algerian Dinar</option>
                                  <option value="EGP">EGP - Egyptian Pound</option>
                                  <option value="ERN">ERN - Eritrean Nakfa</option>
                                  <option value="ETB">ETB - Ethiopian Birr</option>
                                  <option value="EUR">EUR - Euro</option>
                                  <option value="FJD">FJD - Fijian Dollar</option>
                                  <option value="FKP">FKP - Falkland Islands Pound</option>
                                  <option value="GBP">GBP - British Pound Sterling</option>
                                  <option value="GEL">GEL - Georgian Lari</option>
                                  <option value="GGP">GGP - Guernsey Pound</option>
                                  <option value="GHS">GHS - Ghanaian Cedi</option>
                                  <option value="GIP">GIP - Gibraltar Pound</option>
                                  <option value="GMD">GMD - Gambian Dalasi</option>
                                  <option value="GNF">GNF - Guinean Franc</option>
                                  <option value="GTQ">GTQ - Guatemalan Quetzal</option>
                                  <option value="GYD">GYD - Guyanaese Dollar</option>
                                  <option value="HKD">HKD - Hong Kong Dollar</option>
                                  <option value="HNL">HNL - Honduran Lempira</option>
                                  <option value="HRK">HRK - Croatian Kuna</option>
                                  <option value="HTG">HTG - Haitian Gourde</option>
                                  <option value="HUF">HUF - Hungarian Forint</option>
                                  <option value="IDR">IDR - Indonesian Rupiah</option>
                                  <option value="ILS">ILS - Israeli New Sheqel</option>
                                  <option value="IMP">IMP - Manx pound</option>
                                  <option value="INR">INR - Indian Rupee</option>
                                  <option value="IQD">IQD - Iraqi Dinar</option>
                                  <option value="IRR">IRR - Iranian Rial</option>
                                  <option value="ISK">ISK - Icelandic Króna</option>
                                  <option value="JEP">JEP - Jersey Pound</option>
                                  <option value="JMD">JMD - Jamaican Dollar</option>
                                  <option value="JOD">JOD - Jordanian Dinar</option>
                                  <option value="JPY">JPY - Japanese Yen</option>
                                  <option value="KES">KES - Kenyan Shilling</option>
                                  <option value="KGS">KGS - Kyrgystani Som</option>
                                  <option value="KHR">KHR - Cambodian Riel</option>
                                  <option value="KMF">KMF - Comorian Franc</option>
                                  <option value="KPW">KPW - North Korean Won</option>
                                  <option value="KRW">KRW - South Korean Won</option>
                                  <option value="KWD">KWD - Kuwaiti Dinar</option>
                                  <option value="KYD">KYD - Cayman Islands Dollar</option>
                                  <option value="KZT">KZT - Kazakhstani Tenge</option>
                                  <option value="LAK">LAK - Laotian Kip</option>
                                  <option value="LBP">LBP - Lebanese Pound</option>
                                  <option value="LKR">LKR - Sri Lankan Rupee</option>
                                  <option value="LRD">LRD - Liberian Dollar</option>
                                  <option value="LSL">LSL - Lesotho Loti</option>
                                  <option value="LYD">LYD - Libyan Dinar</option>
                                  <option value="MAD">MAD - Moroccan Dirham</option>
                                  <option value="MDL">MDL - Moldovan Leu</option>
                                  <option value="MGA">MGA - Malagasy Ariary</option>
                                  <option value="MKD">MKD - Macedonian Denar</option>
                                  <option value="MMK">MMK - Myanma Kyat</option>
                                  <option value="MNT">MNT - Mongolian Tugrik</option>
                                  <option value="MOP">MOP - Macanese Pataca</option>
                                  <option value="MRU">MRU - Mauritanian Ouguiya</option>
                                  <option value="MUR">MUR - Mauritian Rupee</option>
                                  <option value="MVR">MVR - Maldivian Rufiyaa</option>
                                  <option value="MWK">MWK - Malawian Kwacha</option>
                                  <option value="MXN">MXN - Mexican Peso</option>
                                  <option value="MYR">MYR - Malaysian Ringgit</option>
                                  <option value="MZN">MZN - Mozambican Metical</option>
                                  <option value="NAD">NAD - Namibian Dollar</option>
                                  <option value="NGN">NGN - Nigerian Naira</option>
                                  <option value="NIO">NIO - Nicaraguan Córdoba</option>
                                  <option value="NOK">NOK - Norwegian Krone</option>
                                  <option value="NPR">NPR - Nepalese Rupee</option>
                                  <option value="NZD">NZD - New Zealand Dollar</option>
                                  <option value="OMR">OMR - Omani Rial</option>
                                  <option value="PAB">PAB - Panamanian Balboa</option>
                                  <option value="PEN">PEN - Peruvian Nuevo Sol</option>
                                  <option value="PGK">PGK - Papua New Guinean Kina</option>
                                  <option value="PHP">PHP - Philippine Peso</option>
                                  <option value="PKR">PKR - Pakistani Rupee</option>
                                  <option value="PLN">PLN - Polish Zloty</option>
                                  <option value="PYG">PYG - Paraguayan Guarani</option>
                                  <option value="QAR">QAR - Qatari Rial</option>
                                  <option value="RON">RON - Romanian Leu</option>
                                  <option value="RSD">RSD - Serbian Dinar</option>
                                  <option value="RUB">RUB - Russian Ruble</option>
                                  <option value="RWF">RWF - Rwandan Franc</option>
                                  <option value="SAR">SAR - Saudi Riyal</option>
                                  <option value="SBD">SBD - Solomon Islands Dollar</option>
                                  <option value="SCR">SCR - Seychellois Rupee</option>
                                  <option value="SDG">SDG - Sudanese Pound</option>
                                  <option value="SEK">SEK - Swedish Krona</option>
                                  <option value="SGD">SGD - Singapore Dollar</option>
                                  <option value="SHP">SHP - Saint Helena Pound</option>
                                  <option value="SLL">SLL - Sierra Leonean Leone</option>
                                  <option value="SOS">SOS - Somali Shilling</option>
                                  <option value="SRD">SRD - Surinamese Dollar</option>
                                  <option value="SSP">SSP - South Sudanese Pound</option>
                                  <option value="STN">STN - São Tomé and Príncipe Dobra</option>
                                  <option value="SVC">SVC - Salvadoran Colón</option>
                                  <option value="SYP">SYP - Syrian Pound</option>
                                  <option value="SZL">SZL - Swazi Lilangeni</option>
                                  <option value="THB">THB - Thai Baht</option>
                                  <option value="TJS">TJS - Tajikistani Somoni</option>
                                  <option value="TMT">TMT - Turkmenistani Manat</option>
                                  <option value="TND">TND - Tunisian Dinar</option>
                                  <option value="TOP">TOP - Tongan Pa'anga</option>
                                  <option value="TRY">TRY - Turkish Lira</option>
                                  <option value="TTD">TTD - Trinidad and Tobago Dollar</option>
                                  <option value="TWD">TWD - New Taiwan Dollar</option>
                                  <option value="TZS">TZS - Tanzanian Shilling</option>
                                  <option value="UAH">UAH - Ukrainian Hryvnia</option>
                                  <option value="UGX">UGX - Ugandan Shilling</option>
                                  <option value="USD">USD - United States Dollar</option>
                                  <option value="UYU">UYU - Uruguayan Peso</option>
                                  <option value="UZS">UZS - Uzbekistan Som</option>
                                  <option value="VES">VES - Venezuelan Bolívar</option>
                                  <option value="VND">VND - Vietnamese Dong</option>
                                  <option value="VUV">VUV - Vanuatu Vatu</option>
                                  <option value="WST">WST - Samoan Tala</option>
                                  <option value="XAF">XAF - CFA Franc BEAC</option>
                                  <option value="XCD">XCD - East Caribbean Dollar</option>
                                  <option value="XDR">XDR - Special Drawing Rights</option>
                                  <option value="XOF">XOF - CFA Franc BCEAO</option>
                                  <option value="XPF">XPF - CFP Franc</option>
                                  <option value="YER">YER - Yemeni Rial</option>
                                  <option value="ZAR">ZAR - South African Rand</option>
                                  <option value="ZMW">ZMW - Zambian Kwacha</option>
                                  <option value="ZWL">ZWL - Zimbabwean Dollar</option>
                                  <!-- <option value="">Select a currency</option>
                                  <option value="USD">United States Dollar (USD)</option>
                                  <option value="EUR">Euro (EUR)</option>
                                  <option value="GBP">British Pound Sterling (GBP)</option>
                                  <option value="JPY">Japanese Yen (JPY)</option>
                                  <option value="AUD">Australian Dollar (AUD)</option>
                                  <option value="CAD">Canadian Dollar (CAD)</option>
                                  <option value="CHF">Swiss Franc (CHF)</option>
                                  <option value="CNY">Chinese Yuan (CNY)</option>
                                  <option value="INR">Indian Rupee (INR)</option>
                                  <option value="SGD">Singapore Dollar (SGD)</option> -->
                                  <!-- Add more currencies as needed -->
                                </select>
                              </div>
                              
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Copyright:</label>
                                  <input x-model="formData.copyright" name="copyright" type="text" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="Alright Reserved SML">
                              </div>

                               <div>
                                  <label class="block text-gray-700 dark:text-gray-300">Invoice Logo</label>
                                  <input type="file" x-model="formData.invoice_logo" name="invoice_logo" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Enter charge amount">
                              </div>

                                <!-- <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Invoice Logo</label>
                                <input x-model="formData.invoice_logo" name="invoice_logo" type="file" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                              </div> -->

                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Logo</label>
                                <input x-model="formData.logo1" name="logo1" type="file" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                              </div>
                            
                              
                            </div>
                            <div>
                              <h3 class="mb-5 text-sm font-semibold text-gray-800 dark:text-white/90">Shipment Settings</h3>
                              <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">MPG</label>
                                  <input x-model="formData.mpg" name="mpg" type="number" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                </div>
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Bike Delivery Base Rate</label>
                                  <input x-model="formData.base_rate" name="base_rate" type="number" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                </div>
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Bike Delivery Base Fee</label>
                                  <input x-model="formData.base_fee" name="base_fee" type="number" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                </div>

                                
                                <div>
                                  <label class="block text-gray-700 text-gray-700 dark:text-gray-300">Handling Fee</label>
                                  <input x-model="formData.handling_fee" name="handling_fee" type="number" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                </div>
                              
                              </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                              
                              <div>
                                <label class="block text-gray-700 text-gray-700 dark:text-gray-300">Price Per Mile</label>
                                <input x-model="formData.price_per_mile" name="price_per_mile" type="text" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 numberOnly" placeholder="">
                              </div>

                              <div>
                                <label class="block text-gray-700 text-gray-700 dark:text-gray-300">Price Per Gallon</label>
                                <input x-model="formData.price_per_gallon" name="price_per_gallon" type="text" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 numberOnly" placeholder="">
                              </div>

                              <div>
                                <label class="block text-gray-700 text-gray-700 dark:text-gray-300">Max Length (CM)</label>
                                <input x-model="formData.max_length" name="max_length" type="text" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 numberOnly" placeholder="">
                              </div>

                              <div>
                                <label class="block text-gray-700 text-gray-700 dark:text-gray-300">Max Height(CM)</label>
                                <input x-model="formData.max_height" name="max_height" type="text" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 numberOnly" placeholder="">
                              </div>
                            
                            </div>

                            
                            <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                              <span x-show="!isLoading">Save Changes</span>
                              <span x-show="isLoading" class="flex items-center justify-center">
                                <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                Saving...
                              </span>
                            </button>
                            </form>
                        </div>

                        <!-- Payment Account Form -->
                        <div x-show="activeTab === 'account'">
                          <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Payment Account Setup</h2>
                          <form  @submit.prevent="submitForm('account')" x-ref="accountForm">
                              <!-- Trucking Settings -->
                              <div>
                                  <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Trucking Services</h6>
                                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Bank Name:</label>
                                          <input type="text" x-model="formData.trucking_bank_name" name="trucking_bank_name" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Account Name:</label>
                                          <input type="text" x-model="formData.trucking_account_name" name="trucking_account_name" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Account Number:</label>
                                          <input type="number" x-model="formData.trucking_account_number" name="trucking_account_number" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                  </div> <!-- ✅ Correctly closed grid div -->
                              </div>

                              
                              <div>
                                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                      
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Routing:</label>
                                          <input type="number" x-model="formData.trucking_routing" name="trucking_routing" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Zelle:</label>
                                          <input type="text" x-model="formData.trucking_zelle" name="trucking_zelle" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Pay Cargo:</label>
                                          <input type="text" x-model="formData.trucking_pay_cargo" name="trucking_pay_cargo" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                  </div> <!-- ✅ Correctly closed grid div -->
                              </div>

                              
                              <div>
                                  <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Ocean Transportation Services Settings</h6>
                                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Bank Name:</label>
                                          <input type="text" x-model="formData.ocean_bank_name" name="ocean_bank_name" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Account Name:</label>
                                          <input type="text" x-model="formData.ocean_account_name" name="ocean_account_name" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Account Number:</label>
                                          <input type="number" x-model="formData.ocean_account_number" name="ocean_account_number" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                  </div> <!-- ✅ Correctly closed grid div -->
                              </div>

                              
                              <div>
                                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                      
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Routing:</label>
                                          <input type="number" x-model="formData.ocean_routing" name="ocean_routing" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Zelle:</label>
                                          <input type="text" x-model="formData.ocean_zelle" name="ocean_zelle" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <!-- <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Pay Cargo:</label>
                                          <input type="text" x-model="formData.ocean_bank_name" name="ocean_bank_name" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div> -->
                                  </div> <!-- ✅ Correctly closed grid div -->
                              </div>

                              
                              <!-- <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button> -->
                              <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                                <span x-show="!isLoading">Save Changes</span>
                                <span x-show="isLoading" class="flex items-center justify-center">
                                  <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                  </svg>
                                  Saving...
                                </span>
                              </button>
                          </form>
                        </div>
            
                       <!-- Payment Gateway Form -->
                        <div x-show="activeTab === 'payment'">
                          <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Payment Gateway Setup</h2>
                          <form  @submit.prevent="submitForm('payment')" x-ref="paymentForm">
                              <!-- Paystack Settings -->
                              <div>
                                  <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Paystack Settings</h6>
                                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                          <input type="text" x-model="formData.paystack_publicKey" name="paystack_publicKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                          <input type="text" x-model="formData.paystack_secretKey" name="paystack_secretKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                      </div>
                                  </div> <!-- ✅ Correctly closed grid div -->
                              </div>

                              <!-- Flutterwave Settings -->
                              <div>
                                  <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Flutterwave Settings</h6>
                                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                          <input type="text" x-model="formData.FLW_pubKey" name="FLW_pubKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                          <input type="text" x-model="formData.FLW_secKey" name="FLW_secKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                      </div>
                                  </div>
                              </div>

                               <!-- Razor Settings -->
                              <div>
                                <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">RazorPay Settings</h6>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                        <input type="text" x-model="formData.Razor_pubKey" name="Razor_pubKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                        <input type="text" x-model="formData.Razor_secKey" name="Razor_secKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                    </div>
                                  </div>
                              </div>
                               <!-- Stripe Settings -->
                               <div>
                                <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Stripe Settings</h6>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                        <input type="text" x-model="formData.stripe_pubKey" name="stripe_pubKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                        <input type="text" x-model="formData.stripe_secKey" name="stripe_secKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                    </div>
                                  </div>
                                </div>
                              <!-- <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button> -->
                              <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                                <span x-show="!isLoading">Save Changes</span>
                                <span x-show="isLoading" class="flex items-center justify-center">
                                  <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                  </svg>
                                  Saving...
                                </span>
                              </button>
                          </form>
                        </div>

            
                        <!-- Mail Settings Form -->
                        <div x-show="activeTab === 'sms'">
                            <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Mail Settings</h2>
                            <form @submit.prevent="submitForm('sms')" x-ref="smsForm">
                              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Driver:</label>
                                    <input type="text" x-model="formData.mail_driver" name="mail_driver" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="smtp">
                                </div>
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Host:</label>
                                    <input type="text" x-model="formData.mail_host" name="mail_host" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="smtp.mailtrap.io">
                                </div>
                                
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Port:</label>
                                  <input type="text" x-model="formData.mail_port" name="mail_port" class="numberOnly w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="465">
                              </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Encryption:</label>
                                  <input type="text" x-model="formData.mail_encryption" name="mail_encryption" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SSL TLS">
                              </div>
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Username:</label>
                                  <input type="text" x-model="formData.mail_username" name="mail_username" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="example@mail.com">
                              </div>
                              
                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Password:</label>
                                <input type="password" x-model="formData.mail_password" name="mail_password" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                              </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail From:</label>
                                  <input type="text" x-model="formData.mail_from" name="mail_from" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="example.com">
                              </div>
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Mail Fron Name:</label>
                                  <input type="text" x-model="formData.mail_from_name" name="mail_from_name" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SMILE LOGISTICS">
                              </div>
                              
                            </div>
                              <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button>
                            </form>
                        </div>
            
                        <!-- Contacts Form -->
                        <div x-show="activeTab === 'security'">
                            <h2 class="text-lg font-semibold mb-3">Security Settings</h2>
                            <form id="securityForm" @submit.prevent="submitForm('security')" x-ref="securityForm">
                              <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
                                  <div>
                                      <label class="inline-flex items-center mb-5 cursor-pointer">
                                          <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Enable Email OTP</span>
                                          <input type="checkbox" 
                                                 x-model="formData.enable_email_otp" 
                                                 name="enable_email_otp" 
                                                 @change="formData.enable_email_otp = $event.target.checked ? 1 : 0"
                                                 :checked="formData.enable_email_otp == 1"
                                                 class="sr-only peer">
                                          <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-4 after:h-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                      </label>
                                  </div>
                                  <div>
                                      <label class="inline-flex items-center mb-5 cursor-pointer">
                                          <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Enable 2FA</span>
                                          <input type="checkbox" 
                                                 x-model="formData.enable_2fa" 
                                                 name="enable_2fa" 
                                                 @change="formData.enable_2fa = $event.target.checked ? 1 : 0"
                                                 :checked="formData.enable_2fa == 1"
                                                 class="sr-only peer">
                                          <div class="relative w-11 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-4 after:h-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                      </label>
                                  </div>
                              </div>
                              <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button>
                          </form>
                        </div>

                         <!-- Office location Form -->
                        <div x-show="activeTab === 'offices'">
                            <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Offices Locations</h2>
                            <form id="officeForm" @submit.prevent="submitForm('offices')" x-ref="officeForm">
                              <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
                                  <div>
                                    <template x-for="(item, index) in formData.offices" :key="index">
                                    <div class="mb-6">
                                    <div class="flex justify-end mb-2">
                                        <span @click="addOffice()" 
                                            class="ml-2 cursor-pointer text-lg font-bold text-blue-600 dark:text-blue-400">
                                        +
                                        </span>
                                        <span @click="removeOffice(index)" 
                                            class="ml-2 cursor-pointer text-lg font-bold text-blue-600 dark:text-red-500"
                                            x-show="formData.offices.length > 1">
                                        x
                                        </span>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                                        <div>
                                          <label class="block text-gray-700 dark:text-gray-300">Short Name</label>
                                          <input type="text" x-model="item.short_name" 
                                                :name="'short_name[' + index + ']'"
                                                class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                                placeholder="">
                                          <input type="hidden" x-model="item.id" :name="'id[' + index + ']'">
                                        </div>
                                        <div>
                                          <label class="block text-gray-700 dark:text-gray-300">Long Name</label>
                                          <input type="text" x-model="item.long_name" 
                                                :name="'long_name[' + index + ']'"
                                                class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                                placeholder="">
                                        </div>
                                    </div>
                                    </div>
                                </template>
                                  </div>
                              </div>
                              <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button>
                          </form>
                        </div>
                    </div>
                </div>
              </template>
              <!-- branch settings end -->

              <!-- customer settings starts -->
              <template x-if="userRole === 'customer'">
                <div x-data="{ activeTab: 'address' }" class="w-full mx-auto bg-white p-6 shadow-lg rounded-md dark:bg-white/[0.03]">
                    <!-- Tabs -->
                    <div class="text-sm font-medium text-center text-gray-500 border-b border-gray-200">
                        <ul class="flex flex-wrap -mb-px">
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'address'"
                                    :class="activeTab === 'address' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300" id="profile-tab">Address Setiings</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'basic'"
                                    :class="activeTab === 'basic' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Account Setup</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'other'"
                                    :class="activeTab === 'other' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Other</a>
                            </li>
                        </ul>
                    </div>
            
                    <!-- Tab Content -->
                    <div class="mt-4">
                        <!-- General Settings Form -->
                        <div x-show="activeTab === 'address'">
                            <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Address Settings</h2>
                            <form id="basicForm" @submit.prevent="submitCustomerForm('address')" x-ref="addressForm" enctype="multipart/form-data">
                              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Name:</label>
                                  <input type="text" :value="formData.customer_name" name="name" 
                                         class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" 
                                         placeholder="Enter Name" readonly>
                                </div>
                                  <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Email:</label>
                                      <input type="email" x-model="formData.customer_email" name="email" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                  </div>
                                  
                                  <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Phone:</label>
                                    <input type="text" x-model="formData.customer_phone" name="customer_phone" class="numberOnly w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="Enter Phone number">
                                </div>
                              </div>

                              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Primary Address:</label>
                                    <input type="text" x-model="formData.customer_primary_address" name="customer_primary_address" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="No 123, Street">
                                </div>
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Secondary Address:</label>
                                    <input type="text" x-model="formData.customer_secondary_address" name="customer_secondary_address" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SML">
                                </div>
                                
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Country:</label>
                                  <input type="text" x-model="formData.customer_country" name="customer_country" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                              </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">State:</label>
                                <input type="text" x-model="formData.customer_state" name="customer_state" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                              </div>

                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Zip:</label>
                                  <input type="text" x-model="formData.customer_zip" name="customer_zip" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="No 123, Street">
                              </div>

                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Office:</label>
                                <input type="text" x-model="formData.customer_office" name="customer_office" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="No 123, Street">
                            </div>
                              
                          </div>

                            <style>
                            .chosen-container-single .chosen-single {
                                height: 40px !important;
                                background: none !important;
                                border: none !important;
                                vertical-align: middle !important;
                              }
                            </style>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                              <!-- <div id="chosen-select">
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Currency:</label>
                                <select x-model="formData.currency" name="currency" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 chosen-select">
                                  <option value="" selected disabled>Select a currency</option>
                                  <option value="AED">AED - United Arab Emirates Dirham</option>
                                  <option value="AFN">AFN - Afghan Afghani</option>
                                  <option value="ALL">ALL - Albanian Lek</option>
                                  <option value="AMD">AMD - Armenian Dram</option>
                                  <option value="ANG">ANG - Netherlands Antillean Guilder</option>
                                </select>
                              </div> -->
                              
                              <!-- <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Copyright:</label>
                                  <input x-model="formData.copyright" name="copyright" type="text" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="Alright Reserved SML">
                              </div>

                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Logo</label>
                                <input x-model="formData.logo1" name="logo1" type="file" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                              </div> -->
                            
                              
                            </div>
                            <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                              <span x-show="!isLoading">Save Changes</span>
                              <span x-show="isLoading" class="flex items-center justify-center">
                                <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                Saving...
                              </span>
                            </button>
                            </form>
                        </div>
            
                       <!-- Basic info Form -->
                        <div x-show="activeTab === 'basic'">
                          <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Basic Information</h2>
                          <form  @submit.prevent="submitCustomerForm('basic')" x-ref="basicForm">
                              <!-- Paystack Settings -->
                              <div>
                                  <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Basic Settings</h6>
                                  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Invoice Footer Note:</label>
                                          <input type="text" x-model="formData.invoice_footer_note" name="invoice_footer_note" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Sales Rep:</label>
                                          <input type="text" x-model="formData.customer_sales_rep" name="customer_sales_rep" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Fax No:</label>
                                        <input type="text" x-model="formData.fax_no" name="fax_no" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Toll Free No:</label>
                                        <input type="text" x-model="formData.toll_free" name="toll_free" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                  </div> <!-- ✅ Correctly closed grid div -->
                              </div>

                              <!-- Flutterwave Settings -->
                              <div>
                                  <!-- <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Flutterwave Settings</h6> -->
                                  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Note:</label>
                                          <input type="text" x-model="formData.note" name="note" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Internal Note:</label>
                                          <input type="text" x-model="formData.internal_note" name="internal_note" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      
                                      <!-- <div>
                                          <label class="block text-gray-700 dark:text-gray-300">Tags</label>
                                          <input 
                                            type="text" 
                                            x-model="formData.tagsInput" 
                                            @keydown.space.prevent="addTag()"
                                            @keydown.enter.prevent="addTag()"
                                            @keydown.backspace="removeLastTag()"
                                            class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" 
                                            placeholder="Type tags separated by space"
                                            id="tags"
                                          >
                                          
                                          <div class="flex flex-wrap gap-2 mt-2">
                                            <template x-for="(tag, index) in formData.tags" :key="index">
                                              <div class="flex items-center bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full">
                                                <span x-text="tag" class="text-sm"></span>
                                                <button 
                                                  @click="removeTag(index)" 
                                                  class="ml-2 text-gray-500 hover:text-red-500"
                                                  type="button"
                                                >
                                                  &times;
                                                </button>
                                              </div>
                                            </template>
                                          </div>
                                        </div> -->

                                      <!-- <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">tag:</label>
                                        <input type="text" x-model="formData.tag" name="tag" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div> -->
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Flash Note for Drivers:</label>
                                        <input type="text" x-model="formData.flash_note_for_drivers" name="flash_note_for_drivers" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                  </div>
                              </div>

                               <!-- Razor Settings -->
                              <div>
                                <!-- <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">RazorPay Settings</h6> -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Flash Note for Accounting:</label>
                                        <input type="text" x-model="formData.flash_note_for_accounting" name="flash_note_for_accounting" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Other Notes:</label>
                                        <input type="text" x-model="formData.other_notes" name="other_notes" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                    <script>
                                      $(document).ready(function () {
                              
                                          $(function () {
                                              $("#start_date").
                                              datepicker();
                                          });
                                      }) 
                                  </script>
                                    <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Start Date:</label>
                                      <input type="text" x-model="formData.start_date" name="start_date" id="start_date" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                  </div>
                                  <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Credit Limit:</label>
                                      <input type="text" x-model="formData.credit_limit" name="credit_limit" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 numberOnly" placeholder="">
                                  </div>
                                  
                                  </div>
                              </div>
                              <div>
                                 <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">

                                  <div>
                                      <label class="block text-gray-700 dark:text-gray-300">Alert at percentage</label>
                                      <input type="number" x-model="formData.alert_percentage" name="alert_percentage" id="alert_percentage" @input="alertPercentage" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="">
                                  </div>
                                 </div>
                              </div>
                               <!-- Stripe Settings -->
                               <!-- <div>
                                <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Stripe Settings</h6>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                        <input type="text" x-model="formData.stripe_pubKey" name="stripe_pubKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                        <input type="text" x-model="formData.stripe_secKey" name="stripe_secKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                    </div>
                                  </div>
                                </div> -->
                              <!-- <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button> -->
                              <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                                <span x-show="!isLoading">Save Changes</span>
                                <span x-show="isLoading" class="flex items-center justify-center">
                                  <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                  </svg>
                                  Saving...
                                </span>
                              </button>
                          </form>
                        </div>

            
            
                        <!-- Contacts Form -->
                        <div x-show="activeTab === 'other'">
                            <h2 class="text-lg font-semibold mb-3">Other Settings</h2>
                            <form id="otherForm" @submit.prevent="submitCustomerForm('other')" x-ref="otherForm">
                              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                  <div>
                                    <label class="inline-flex items-center mb-5 cursor-pointer">
                                      <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">is Sub Account?</span>
                                      <input type="checkbox" x-model="formData.isSubAccount" name="isSubAccount" value="" class="sr-only peer" @change="formData.isSubAccount = $event.target.checked ? 1 : 0">
                                      <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-5 after:h-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                    </label>
                                    
                                  </div>
                                  
                                  <div x-show="formData.isSubAccount === 1" x-transition>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Sub Account of?:</label>
                                    <input type="text" x-model="formData.subAccount_of" name="subAccount_of" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                </div>
                              </div>
                              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                  <label class="inline-flex items-center mb-5 cursor-pointer">
                                    <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">is Factored?</span>
                                    <input type="checkbox" x-model="formData.isFactoredInvoice" name="isFactoredInvoice" value="0" class="sr-only peer" @change="formData.isFactoredInvoice = $event.target.checked ? 1 : 0">
                                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-5 after:h-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                  </label>
                                  
                                </div>
                                
                                  <div x-show="formData.isFactoredInvoice === 1" x-transition>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Factoring Company:</label>
                                    <input type="text" x-model="formData.factoringCompany" name="factoringCompany" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                </div>
                                </div>
                                  <div>
                                    <label class="inline-flex items-center mb-5 cursor-pointer">
                                      <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">is Prepaid?</span>
                                      <input type="checkbox" x-model="formData.isPrepaid" name="isPrepaid" value="0" class="sr-only peer" @change="formData.isPrepaid = $event.target.checked ? 1 : 0">
                                      <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-5 after:h-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                    </label>                                    
                                  </div>

                                  
                                  <div>
                                    <label class="inline-flex items-center mb-5 cursor-pointer">
                                      <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">is Non Billable?</span>
                                      <input 
                                        type="checkbox" 
                                        x-model="formData.isNonBillable" 
                                        name="isNonBillable" 
                                        value="1" 
                                        class="sr-only peer"
                                        @change="formData.isNonBillable = $event.target.checked ? 1 : 0"
                                      >
                                      <div class="relative w-10 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-5 after:h-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                    </label>                                    
                                  </div>

                                    <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
                                    <div>
                                        <label class="inline-flex items-center mb-5 cursor-pointer">
                                            <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Enable Email OTP</span>
                                            <input type="checkbox" 
                                                  x-model="formData.enable_email_otp" 
                                                  name="enable_email_otp" 
                                                  @change="formData.enable_email_otp = $event.target.checked ? 1 : 0"
                                                  :checked="formData.enable_email_otp == 1"
                                                  class="sr-only peer">
                                            <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-4 after:h-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                    <div>
                                        <label class="inline-flex items-center mb-5 cursor-pointer">
                                            <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Enable 2FA</span>
                                            <input type="checkbox" 
                                                  x-model="formData.enable_2fa" 
                                                  name="enable_2fa" 
                                                  @change="formData.enable_2fa = $event.target.checked ? 1 : 0"
                                                  :checked="formData.enable_2fa == 1"
                                                  class="sr-only peer">
                                            <div class="relative w-11 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-4 after:h-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                        </label>
                                    </div>
                                </div>
                                  <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button>
                                </form>
                              </div>
                        </div>
                    </div>
                </div>
              </template>

              <!-- customer settings ends -->

              <!-- Driver settings starts -->
              <template x-if="userRole === 'driver'">
                <div x-data="{ activeTab: 'address' }" class="w-full mx-auto bg-white p-6 shadow-lg rounded-md dark:bg-white/[0.03]">
                    <!-- Tabs -->
                    <div class="text-sm font-medium text-center text-gray-500 border-b border-gray-200">
                        <ul class="flex flex-wrap -mb-px">
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'address'"
                                    :class="activeTab === 'address' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300" id="profile-tab">Address Setiings</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'basic'"
                                    :class="activeTab === 'basic' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Basic Setup</a>
                            </li>
                            <li class="me-2">
                                <a href="#" @click.prevent="activeTab = 'other'"
                                    :class="activeTab === 'other' ? 'text-blue-600 border-blue-600' : 'hover:text-gray-600 border-transparent'"
                                    class="inline-block p-4 border-b-2 rounded-t-lg text-gray-700 dark:text-gray-300">Other</a>
                            </li>
                        </ul>
                    </div>
            
                    <!-- Tab Content -->
                    <div class="mt-4">
                        <!-- General Settings Form -->
                        <div x-show="activeTab === 'address'">
                            <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Address Settings</h2>
                            <form id="DbasicForm" @submit.prevent="submitDriverForm('Daddress')" x-ref="driverAddressForm" enctype="multipart/form-data">
                              <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Name:</label>
                                  <input type="text" :value="user.name" name="name" 
                                         class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" 
                                         placeholder="Enter Name" readonly>
                                </div>
                                  <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Email:</label>
                                      <input type="email" x-model="user.email" name="email" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                  </div>
                                  
                                  <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Phone:</label>
                                    <input type="text" x-model="formData.driver_phone" name="driver_phone" class="numberOnly w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="Enter Phone number">
                                </div>
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Phone Carrier:</label>
                                  <select type="text" x-model="formData.driver_phone_carrier" name="driver_phone_carrier" class=" w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder=""> 
                                    <option value="Vodafone">Vodafone</option>
                                    <option value="Airtel">Airtel</option>
                                    <option value="MTN">MTN</option>
                                    <option value="Glo">Glo</option>
                                    <option value="Vodafone">Vodafone</option>
                                    <option value="other">Others</option>
                                    </select>
                              </div>
                              </div>

                              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Primary Address:</label>
                                    <input type="text" x-model="formData.driver_primary_address" name="driver_primary_address" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="No 123, Street">
                                </div>
                                <div>
                                    <label class="block mb-2 text-gray-700 dark:text-gray-300">Secondary Address:</label>
                                    <input type="text" x-model="formData.driver_secondary_address" name="driver_secondary_address" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="SML">
                                </div>
                                
                                <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">Country:</label>
                                  <input type="text" x-model="formData.driver_country" name="driver_country" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                              </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">State:</label>
                                <input type="text" x-model="formData.driver_state" name="driver_state" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                              </div>
                              
                              <div>
                                  <label class="block mb-2 text-gray-700 dark:text-gray-300">City:</label>
                                  <input type="text" x-model="formData.driver_city" name="driver_city" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                              </div>
                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Zip:</label>
                                <input type="text" x-model="formData.driver_zip" name="driver_zip" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                            </div>

                              <div>
                                <label class="block mb-2 text-gray-700 dark:text-gray-300">Office:</label>
                                <select type="text" x-model="formData.office" name="office" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder=""> 
                                  <option value="" selected disabled> Choose</option>
                                  <option value="IN">IN</option>
                                  </select>
                            </div>
                              
                          </div>
                            <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                              <span x-show="!isLoading">Save Changes</span>
                              <span x-show="isLoading" class="flex items-center justify-center">
                                <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                Saving...
                              </span>
                            </button>
                            </form>
                        </div>
            
                       <!-- Basic info Form -->
                        <div x-show="activeTab === 'basic'">
                          <h2 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Basic Information</h2>
                          <form  @submit.prevent="submitDriverForm('Dbasic')" x-ref="driverBasicForm">
                              <!-- Paystack Settings -->
                              <div>
                                  <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Basic Settings</h6>
                                  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Driver Type:</label>
                                          <select type="text" x-model="formData.driver_type" name="driver_type" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" disabled>
                                            <option value="" selected disabled> Choose</option>
                                            <option value="1">Owner Operator (single Truck)</option>
                                            <option value="2">Company Driver</option>
                                            <option value="3">Driver for Fleet owner or Fleet owner Himself</option>
                                            <option value="4">Temporary Driver</option>
                                            <option value="5">Rented Driver</option>
                                            <option value="6">Leased Driver</option>
                                          </select>
                                      </div>
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Emergency contact phone:</label>
                                          <input type="text" x-model="formData.emergency_contact_info" name="emergency_contact_info" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <script>
                                        $(document).ready(function() {
                                          $('#hired_on', '#terminated_on').datepicker({
                                            format: 'yyyy-mm-dd',
                                            autoclose: true
                                          });
                                        })
                                      </script>
                                      <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Hired on:</label>
                                        <input type="text" x-model="formData.hired_on" name="hired_on" id="hired_on" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                    </div>

                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">terminated_on:</label>
                                        <input type="text" x-model="formData.terminated_on" name="terminated_on" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                    </div>
                                  </div> <!-- ✅ Correctly closed grid div -->
                              </div>

                              <!-- Flutterwave Settings -->
                              <div>
                                  <!-- <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Flutterwave Settings</h6> -->
                                  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                      <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">Years of Experience:</label>
                                          <input type="text" x-model="formData.years_of_experience" name="years_of_experience" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div>
                                      <!-- <div>
                                          <label class="block mb-2 text-gray-700 dark:text-gray-300">tags:</label>
                                          <input type="text" x-model="formData.tags" name="tags" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                      </div> -->

                                         <!-- <div>
                                      <label class="block text-gray-700 dark:text-gray-300">Tags</label>
                                      <input 
                                        type="text" 
                                        x-model="formData.tagsInput" 
                                        @keydown.space.prevent="addTag()"
                                        @keydown.enter.prevent="addTag()"
                                        @keydown.backspace="removeLastTag()"
                                        class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white" 
                                        placeholder="Type tags separated by space"
                                        id="tags"
                                      >

                                      <div class="flex flex-wrap gap-2 mt-2">
                                        <template x-for="(tag, index) in formData.tags" :key="index">
                                          <div class="flex items-center bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full">
                                            <span x-text="tag" class="text-sm"></span>
                                            <button 
                                              @click="removeTag(index)" 
                                              class="ml-2 text-gray-500 hover:text-red-500"
                                              type="button"
                                            >
                                              &times;
                                            </button>
                                          </div>
                                        </template>
                                      </div>
                                    </div> -->
                                      <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Endorsements:</label>
                                        <input type="text" x-model="formData.endorsements" name="endorsements" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Rating:</label>
                                        <input type="text" x-model="formData.rating" name="rating" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                    </div>
                                  </div>
                              </div>

                               <!-- Razor Settings -->
                              <div>
                                <!-- <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">RazorPay Settings</h6> -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Note About choices Made:</label>
                                        <input type="text" x-model="formData.notes_about_the_choices_made" name="notes_about_the_choices_made" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Pay Via:</label>
                                        <input type="text" x-model="formData.pay_via" name="pay_via" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                    <script>
                                      $(document).ready(function () {
                              
                                          $(function () {
                                              $("#start_date").
                                              datepicker();
                                          });
                                      }) 
                                  </script>
                                    <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Company name paid to:</label>
                                      <input type="text" x-model="formData.company_name_paid_to" name="company_name_paid_to" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                  </div>
                                  <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Employer ID #</label>
                                      <input type="text" x-model="formData.employer_identification_number" name="employer_identification_number" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 numberOnly" placeholder="">
                                  </div>
                                  </div>
                              </div>

                              <div>
                                <!-- <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">RazorPay Settings</h6> -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Settlement Email:</label>
                                        <input type="text" x-model="formData.send_settlements_mail" name="send_settlements_mail" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Print settlement under this company:</label>
                                        <input type="text" x-model="formData.print_settlements_under_this_company" name="print_settlements_under_this_company" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="">
                                    </div>
                                    <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Flash notes to dispatch:</label>
                                      <input type="text" x-model="formData.flash_notes_to_dispatch" name="flash_notes_to_dispatch" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                  </div>
                                  <div>
                                      <label class="block mb-2 text-gray-700 dark:text-gray-300">Flash notes to payroll:</label>
                                      <input type="text" x-model="formData.flash_notes_to_payroll" name="flash_notes_to_payroll" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300 numberOnly" placeholder="" readonly>
                                  </div>
                                  </div>
                              </div>

                              
                              <div>
                                <!-- <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">RazorPay Settings</h6> -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">internal_notes:</label>
                                        <input type="text" x-model="formData.internal_notes" name="internal_notes" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" readonly>
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Driver Status:</label>
                                        <select type="text" x-model="formData.driver_status" name="driver_status" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="" disabled>
                                          <option value="active">Active</option>
                                          <option value="Inactive">Inactive</option>
                                        </select>
                                    </div>
                                  </div>
                              </div>
                              
                               <!-- Stripe Settings -->
                               <!-- <div>
                                <h6 class="text-md font-medium mb-3 text-gray-700 dark:text-gray-300">Stripe Settings</h6>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Public Key:</label>
                                        <input type="text" x-model="formData.stripe_pubKey" name="stripe_pubKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXX">
                                    </div>
                                    <div>
                                        <label class="block mb-2 text-gray-700 dark:text-gray-300">Secret Key:</label>
                                        <input type="text" x-model="formData.stripe_secKey" name="stripe_secKey" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 text-gray-700 dark:text-gray-300" placeholder="XXXXXXXXXXXXX">
                                    </div>
                                  </div>
                                </div> -->
                              <!-- <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button> -->
                              <button type="submit" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded" :disabled="isLoading">
                                <span x-show="!isLoading">Save Changes</span>
                                <span x-show="isLoading" class="flex items-center justify-center">
                                  <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                  </svg>
                                  Saving...
                                </span>
                              </button>
                          </form>
                        </div>

            
            
                        <!-- Contacts Form -->
                        <div x-show="activeTab === 'other'">
                            <h2 class="text-lg font-semibold mb-3">Other Settings</h2>
                            <form id="DotherForm" @submit.prevent="submitDriverForm('Dother')" x-ref="driverOtherForm">
                              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                  <div>
                                    <label class="inline-flex items-center mb-5 cursor-pointer">
                                      <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Access To Mobile App?</span>
                                      <input type="checkbox" x-model="formData.isAccessToMobileApp" name="isAccessToMobileApp" value="" class="sr-only peer" @change="formData.isAccessToMobileApp = $event.target.checked ? 1 : 0">
                                      <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-5 after:h-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                    </label>
                                    
                                  </div>
                                  
                              </div>
                              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                  <label class="inline-flex items-center mb-5 cursor-pointer">
                                    <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 mr-40">Show payment in mobile App?</span>
                                    <input type="checkbox" x-model="formData.mobile_settings" name="mobile_settings" value="0" class="sr-only peer" @change="formData.mobile_settings = $event.target.checked ? 1 : 0">
                                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[3px] after:bg-gray-800 after:border-gray-300 after:border after:rounded-full after:w-4 after:h-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                                  </label>
                                  
                                </div>
                                
                                </div>
                                  <button class="mt-3 bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button>
                                </form>
                              </div>
                        </div>
                    </div>
                </div>
              </template>
              <!-- Driver update ends -->
            
            </div>

          </div>
        </main>
        <!-- ===== Main Content End ===== -->
      </div>
      <!-- ===== Content Area End ===== -->
    </div>
    <!-- ===== Page Wrapper End ===== -->

    <script>
      document.addEventListener('alpine:init', () => {
  Alpine.data('settings', () => ({
    activeTab: 'general',
    activeTab: 'address',
    activeTab: 'offices',
    isLoading: false,
    userRole: window.userRole,
    user: {
      name: '',
      email: ''
    },
    offices: [{
        short_name: '',
        long_name: '',
      }],
    formData: {
      phone: '',
      address: '',
      parcel_prefix: '',
      invoice_prefix: '',
      currency: '',
      copyright: '',
      paystack_publicKey: '',
      paystack_secretKey: '',
      FLW_pubKey: '',
      FLW_secKey: '',
      Razor_pubKey: '',
      Razor_secKey: '',
      stripe_pubKey: '',
      stripe_secKey: '',
      mail_driver: '',
      mail_host: '',
      mail_port: '',
      mail_encryption: '',
      mail_username: '',
      mail_password: '',
      mail_from: '',
      mail_from_name: '',
      enable_email_otp: 0, // Default to 0 (unchecked)
      enable_2fa: 0,   
      logo1: '',
      invoice_logo: '',
      mpg: '',
      base_rate: '',
      base_fee: '',
      handling_fee: '',
      price_per_mile: '',
      price_per_gallon: '',
      max_height: '',
      max_length: '',

      //Payment Account
      trucking_bank_name: '',
      trucking_account_name: '',
      trucking_account_number: '',
      trucking_routing: '',
      trucking_zelle: '',
      trucking_pay_cargo: '',
      ocean_bank_name: '',
      ocean_account_name: '',
      ocean_account_number: '',
      ocean_routing: '',
      ocean_zelle: '',


      //customer and Driver variables
      customer_phone: '',
      customer_primary_address: '',
      customer_secondary_address: '',
      customer_country: '',
      customer_state: '',
      customer_zip: '',
      customer_office: '',

      invoice_footer_note: '',
      customer_sales_rep: '',
      fax_no: '',
      toll_free: '',
      note: '',
      internal_note: '',
      tag: '',
      flash_note_for_drivers: '',
      flash_note_for_accounting: '',
      other_notes: '',
      start_date: '',
      credit_limit: '',

      isSubAccount: '',
      subAccount_of: '',
      isFactoredInvoice: '',
      factoringCompany: '',
      isPrepaid: '',
      isNonBillable: '',

      //driver address
      driver_phone: '',
      driver_phone_carrier: '',
      driver_primary_address: '',
      driver_secondary_address: '',
      driver_country: '',
      driver_state: '',
      driver_city: '',
      driver_zip: '',
      office: '',

      //basic
      driver_type: '',
      emergency_contact_info: '',
      hired_on: '',
      terminated_on: '',
      years_of_experience: '',
      //tags: '',
      // tags: [],
      // tagsInput: '',
      endorsements: '',
      rating: '',
      notes_about_the_choices_made: '',
      pay_via: '',
      company_name_paid_to: '',
      employer_identification_number: '',
      send_settlements_mail: '',
      print_settlements_under_this_company: '',
      flash_notes_to_dispatch: '',
      flash_notes_to_payroll: '',
      internal_notes: '',
      driver_status: '',

      isAccessToMobileApp: '',
      mobile_settings: '',

      offices: [{
        short_name: '',
        long_name: ''
      }],

      
      
    },
    
    init() {
      this.fetchUserData();
      this.fetchSettings();
      //this.submitCustomerForm();
      
      if(!this.formData.offices){
          this.formData.offices = [{
          short_name: '',
          long_name: ''
          }];
      }
    },
    addOffice() {
        this.formData.offices.push({
            short_name: '',
            long_name: ''
        });
        //this.saveProgress();
    },
    
    removeOffice(index) {
        if (this.formData.offices.length > 1) {
            this.formData.offices.splice(index, 1);
            //this.saveProgress();
        }
    },

    alertPercentage() {
                const creditLimit = parseFloat(this.formData.alert_percentage);
                const creditInput = document.querySelector('#alert_percentage');

            if (creditLimit > 100) {
                if (creditInput) {
                    creditInput.style.border = '2px solid red';
                }
                createToast('error', 'Alert Percentage cannot be greater than 100%');
            } else {
                if (creditInput) {
                    creditInput.style.border = '';
                }
            }
        },

      // addTag() {
      //   if (this.formData.tagsInput.trim()) {
      //       // Split by spaces and filter out empty strings
      //       const newTags = this.formData.tagsInput.split(' ')
      //       .map(tag => tag.trim())
      //       .filter(tag => tag.length > 0);
            
      //       // Add new tags to the array, avoiding duplicates
      //       newTags.forEach(tag => {
      //       if (!this.formData.tags.includes(tag)) {
      //           this.formData.tags.push(tag);
      //       }
      //       });
            
      //       this.formData.tagsInput = '';
      //       //this.saveProgress();
      //   }
      //   },
        
      //   removeTag(index) {
      //   this.formData.tags.splice(index, 1);
      //   //this.saveProgress();
      //   },
        
      //   removeLastTag() {
      //   if (this.formData.tagsInput === '' && this.formData.tags.length > 0) {
      //       this.formData.tags.pop();
      //       //this.saveProgress();
      //   }
      //   },
    
    async fetchUserData() {
      try {
        const response = await fetch(requestURL + '/user', {
        headers: {
          'Authorization': 'Bearer ' + localStorage.getItem('auth_token'),
          'Accept': 'application/json'
        }
      });
        if (response.ok) {
          const data = await response.json();
          console.log("User data", data);
          //console.log("User Role", userRole);
          this.user = {
            name: data.fname + ' ' + data.lname,
            email: data.email
          };
        }
      } catch (error) {
        console.error('Error fetching user data:', error);
      }
    },
      // this.formData = {
      //       ...this.formData,
      //       ...data
      //     };

    async fetchSettings() {
      try {
        const response = await fetch(requestURL + '/settings/data', {
        headers: {
          'Authorization': 'Bearer ' + localStorage.getItem('auth_token'),
          'Accept': 'application/json'
        }
      });
        if (response.ok) {
          const datas = await response.json();
          let data = Array.isArray(datas) ? datas[0] : datas;
          console.log("Settings data", data);

          //localStorage.setItem('xxxxxx', JSON.stringify(data));
          
          console.log('FOMR DATA',data);
          localStorage.setItem('currency', data.currency);
        this.formData.phone = data.phone || '';
      this.formData.address = data.address || '';
      this.formData.about_us = data.about_us || '';
      this.formData.parcel_prefix = data.parcel_tracking_prefix || '';
      this.formData.invoice_prefix = data.invoice_prefix || '';
      this.formData.currency = data.currency || '';
      this.formData.copyright = data.copyright || '';
      
      // this.formData.logo1 = data.logo1 || '';
      // this.formData.logo2 = data.logo2 || '';
      // this.formData.logo3 = data.logo3 || '';

      this.formData.paystack_publicKey = data.paystack_publicKey || '';
      this.formData.paystack_secretKey = data.paystack_secretKey || '';

      this.formData.FLW_pubKey = data.FLW_pubKey || '';
      this.formData.FLW_secKey = data.FLW_secKey || '';

      this.formData.Razor_pubKey = data.Razor_pubKey || '';
      this.formData.Razor_secKey = data.Razor_secKey || '';

      this.formData.stripe_pubKey = data.stripe_pubKey || '';
      this.formData.stripe_secKey = data.stripe_secKey || '';

      this.formData.mail_driver = data.mail_driver || '';
      this.formData.mail_host = data.mail_host || '';
      this.formData.mail_port = data.mail_port || '';
      this.formData.mail_encryption = data.mail_encryption || '';
      this.formData.mail_username = data.mail_username || '';
      this.formData.mail_password = data.mail_password || '';
      this.formData.mail_from = data.mail_from_address || '';
      this.formData.mail_from_name = data.mail_from_name || '';

      this.formData.enable_email_otp = data.enable_email_otp === 1 ? 1 : 0;
      this.formData.enable_2fa = data.enable_2fa === 1 ? 1 : 0;

      this.formData.base_fee = data.base_fee || '';
      this.formData.base_rate = data.base_rate || '';
      this.formData.handling_fee = data.handling_fee || '';
      this.formData.price_per_mile = data.price_per_mile || '';
      this.formData.price_per_gallon = data.price_per_gallon || '';
      this.formData.mpg = data.mpg || '';
      this.formData.max_height = data.max_height || '';
      this.formData.max_length = data.max_length || '';
      this.formData.discount = data.discount || '';
      this.formData.subscription_type = data.subscription_type || '';
      this.formData.subscription_count = data.subscription_count || '';
      this.formData.subscription_date = data.subscription_date || '';
      this.formData.subscription_end_date = data.subscription_end_date || '';


      //customer information
      this.formData.customer_name = data.user?.fname || '';
      this.formData.customer_email = data.user?.email || '';
      this.formData.customer_phone = data.customer_phone || '';
      this.formData.customer_primary_address = data.customer_primary_address || '';
      this.formData.customer_secondary_address = data.customer_secondary_address || '';
      this.formData.customer_state = data.customer_state || '';
      this.formData.customer_zip = data.customer_zip || '';
      this.formData.customer_country = data.customer_country || '';
      this.formData.invoice_footer_note = data.invoice_footer_note || '';
      this.formData.customer_sales_rep = data.customer_sales_rep || '';

      this.formData.toll_free = data.toll_free || '';
      this.formData.note = data.note || '';
      this.formData.internal_note = data.internal_note || '';
      this.formData.flash_note_for_drivers = data.flash_note_for_drivers || '';
      this.formData.flash_note_for_accounting = data.flash_note_for_accounting || '';

      this.formData.fax_no = data.fax_no || '';
      this.formData.other_notes = data.other_notes || '';
      this.formData.credit_limit = data.credit_limit || '';
      this.formData.alert_percentage = data.alert_percentage || '';

      //driver 
      this.formData.driver_type = data.driver_type || '';
      this.formData.emergency_contact_info = data.emergency_contact_info || '',
      this.formData.hired_on = data.hired_on || '',
      this.formData.terminated_on = data.terminated_on || '',
      this.formData.endorsements = data.endorsements || '';
      this.formData.years_of_experience = data.years_of_experience || '';
      this.formData.pay_via = data.pay_via || '';
      this.formData.employer_identification_number = data.employer_identification_number || '';
      this.formData.rating = data.rating || '';
      this.formData.notes_about_the_choices_made = data.notes_about_the_choices_made || '';
      this.formData.isAccessToMobileApp = data.isAccessToMobileApp || '';
      this.formData.mobile_settings = data.mobile_settings || '';

      this.formData.trucking_account_name = data.trucking_account_name || '';
      this.formData.trucking_account_number = data.trucking_account_number || '';
      this.formData.trucking_routing = data.trucking_routing || '';
      this.formData.trucking_bank_name = data.trucking_bank_name || '';
      this.formData.trucking_zelle = data.trucking_zelle || '';
      this.formData.trucking_pay_cargo = data.trucking_pay_cargo || '';
      this.formData.ocean_bank_name = data.ocean_bank_name || '';
      this.formData.ocean_account_name = data.ocean_account_name || '';
      this.formData.ocean_account_number = data.ocean_account_number || '';
      this.formData.ocean_routing = data.ocean_routing || '';
      this.formData.ocean_zelle = data.ocean_zelle || '';

      this.formData.offices = data.offices && data.offices.length > 0 
        ? data.offices.map(office => ({
            id: office.id || '',
            short_name: office.short_name || '',
            long_name: office.long_name || '',
          }))
        : [{ short_name: '', long_name: '' }];
      

      //this.formData.
        
        // tenable_email_otp: data.enable_email_otp === 1 ? 1 : 0,
        //                 enable_2fa: data.enable_2fa === 1 ? 1 : 0
        }
      } catch (error) {
        console.error('Error fetching settings data:', error);
      }
    },
    
    async submitCustomerForm(tabName) {
      this.isLoading = true;
      const form = this.$refs[`${tabName}Form`];
      const formData = new FormData(form);
      //console.log(tabName);
      // console.log("FormData Contents:");
        // for (let pair of formData.entries()) {
        //     console.log(pair[0] + ": " + pair[1]);
        // }
        //       console.log(localStorage.getItem('auth_token'))
        //  return
         
        //formData.append('tags', this.formData.tags.join(','));
      try {
        const response = await fetch(`${requestURL}/settings/${tabName}`, {
          method: 'POST',
          body: formData,
          headers: {
            'Authorization': 'Bearer ' + localStorage.getItem('auth_token'),
            'Accept': 'application/json',
          }
        });
        
        const data = await response.json();
        
        if (response.ok) {
          createToast('success', data.message);	
        } else {
          createToast('error', data.message);
        }
      } catch (error) {
        console.error('Error:', error);
        createToast('error','Network error. Please try again.');
      } finally {
        this.isLoading = false;
      }
    },

    async submitDriverForm(tabName) {
  this.isLoading = true;
  
  // Create FormData and manually populate from Alpine.js state
  const formData = new FormData();
  
  // Add all driver form fields manually
  if (tabName === 'Daddress') {
    formData.append('driver_phone', this.formData.driver_phone || '');
    formData.append('driver_phone_carrier', this.formData.driver_phone_carrier || '');
    formData.append('driver_primary_address', this.formData.driver_primary_address || '');
    formData.append('driver_secondary_address', this.formData.driver_secondary_address || '');
    formData.append('driver_country', this.formData.driver_country || '');
    formData.append('driver_state', this.formData.driver_state || '');
    formData.append('driver_city', this.formData.driver_city || '');
    formData.append('driver_zip', this.formData.driver_zip || '');
    formData.append('office', this.formData.office || '');
  } 
  else if (tabName === 'Dbasic') {
    formData.append('driver_type', this.formData.driver_type || '');
    formData.append('emergency_contact_info', this.formData.emergency_contact_info || '');
    formData.append('hired_on', this.formData.hired_on || '');
    formData.append('terminated_on', this.formData.terminated_on || '');
    formData.append('years_of_experience', this.formData.years_of_experience || '');
    formData.append('endorsements', this.formData.endorsements || '');
    formData.append('rating', this.formData.rating || '');
    formData.append('notes_about_the_choices_made', this.formData.notes_about_the_choices_made || '');
    formData.append('pay_via', this.formData.pay_via || '');
    formData.append('company_name_paid_to', this.formData.company_name_paid_to || '');
    formData.append('employer_identification_number', this.formData.employer_identification_number || '');
    formData.append('send_settlements_mail', this.formData.send_settlements_mail || '');
    formData.append('print_settlements_under_this_company', this.formData.print_settlements_under_this_company || '');
    formData.append('flash_notes_to_dispatch', this.formData.flash_notes_to_dispatch || '');
    formData.append('flash_notes_to_payroll', this.formData.flash_notes_to_payroll || '');
    formData.append('internal_notes', this.formData.internal_notes || '');
    formData.append('driver_status', this.formData.driver_status || '');
  }
  else if (tabName === 'Dother') {
    formData.append('isAccessToMobileApp', this.formData.isAccessToMobileApp ? '1' : '0');
    formData.append('mobile_settings', this.formData.mobile_settings ? '1' : '0');
  }

  console.log("FormData Contents:");
  for (let pair of formData.entries()) {
    console.log(pair[0] + ": " + pair[1]);
  }

  //return;

  try {
    const response = await fetch(`${requestURL}/settings/${tabName}`, {
      method: 'POST',
      body: formData,
      headers: {
        'Authorization': 'Bearer ' + localStorage.getItem('auth_token'),
        'Accept': 'application/json',
      }
    });
    
    const data = await response.json();
    
    if (response.ok) {
      createToast('success', data.message);	
    } else {
      createToast('error', data.message);
    }
  } catch (error) {
    console.error('Error:', error);
    createToast('error','Network error. Please try again.');
  } finally {
    this.isLoading = false;
  }
},

    
    // async submitDriverForm(tabName) {
    //   this.isLoading = true;
    //   const form = this.$refs[`${tabName}Form`];
    //   const formData = new FormData(form);
    //   //console.log(tabName);
    //   //console.log("FormData Contents:");
    //     // for (let pair of formData.entries()) {
    //     //     console.log("SubmitForm data ",pair[0] + ": " + pair[1]);
    //     // }
    //     //       console.log(localStorage.getItem('auth_token'))
    //     //  return
    //   try {
    //     const response = await fetch(`${requestURL}/settings/${tabName}`, {
    //       method: 'POST',
    //       body: formData,
    //       headers: {
    //         'Authorization': 'Bearer ' + localStorage.getItem('auth_token'),
    //         'Accept': 'application/json',
    //       }
    //     });
        
    //     const data = await response.json();
        
    //     if (response.ok) {
    //       createToast('success', data.message);	
    //     } else {
    //       createToast('error', data.message);
    //     }
    //   } catch (error) {
    //     console.error('Error:', error);
    //     createToast('error','Network error. Please try again.');
    //   } finally {
    //     this.isLoading = false;
    //   }
    // },

    async submitForm(tabName) {
      this.isLoading = true;
      const form = this.$refs[`${tabName}Form`];
      const formData = new FormData(form);
      //console.log(tabName);
      if (tabName === 'offices') {
      // Clear any existing office data in formData
      formData.delete('short_name[]');
      formData.delete('long_name[]');
      
      // Add each office's data from the Alpine state
      this.formData.offices.forEach(office => {
        formData.append('short_name[]', office.short_name);
        formData.append('long_name[]', office.long_name);
      });
    }
      formData.set('enable_email_otp', this.formData.enable_email_otp);
      formData.set('enable_2fa', this.formData.enable_2fa);
      // console.log("FormData Contents:");
        for (let pair of formData.entries()) {
            console.log(pair[0] + ": " + pair[1]);
        }
              console.log(localStorage.getItem('auth_token'))
         //return
      try {
        const response = await fetch(`${requestURL}/settings/${tabName}`, {
          method: 'POST',
          body: formData,
          headers: {
            'Authorization': 'Bearer ' + localStorage.getItem('auth_token'),
            'Accept': 'application/json',
          }
        });
        
        const data = await response.json();
        
        if (response.ok) {
          createToast('success', data.message);	
        } else {
          createToast('error', data.message);
        }
      } catch (error) {
        console.error('Error:', error);
        createToast('error','Network error. Please try again.');
      } finally {
        this.isLoading = false;
      }
    },
    
    // showToast(message, type = 'success') {
    //   // Implement your toast notification here
    //   alert(`${type.toUpperCase()}: ${message}`);
    // }
  }));
});

// Initialize the component
document.addEventListener('DOMContentLoaded', () => {
  Alpine.start();
});
    </script>
  </body>
</html>
